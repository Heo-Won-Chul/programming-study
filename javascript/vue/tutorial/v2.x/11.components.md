# 컴포넌트

### 컴포넌트가 무엇인가?

- Vue의 가장 강력한 기능 중 하나
- 캡슐화 가능
- 특별한 경우, `is` 속성으로 원시 HTML으로 나타낼 수 있다.


### 컴포넌트 사용하기

- 전역 등록 (네이밍 규칙: 소문자 + 하이픈(`-`))

```javascript
Vue.component('{tag-name}', {
	// 옵션
});
```

- 지역 등록
	- 컴포넌트의 `components` 옵션으로 등록 할 수 있다.

```javascript
new Vue({
	// ...
	components: {
		'{tag-name}': '<div></div>'
	}
})
```

------------------------

- 일부 제한이 있는 엘리먼트는 `is` 속성을 활용한다.
- **아래와 같은 사항에는 제한 사항이 적용되지 않는다.**
	- `<script type="text/x-template">`
	- 인라인 템플릿 문자열
	- `.vue` 컴포넌트

------------------------

- 전역 컴포넌트에서 `data`는 **반드시** 함수여야 한다.

------------------------

- 컴포넌트는 **부모-자식 관계**를 갖을 수 있으며, 부모는 `props`를 통해 자식에게 데이터는 전달하고 자식은 `events`를 통해 부모에게 메시지를 보낸다.


### props

- 모든 컴포넌트 인스턴스에는 자체 **격리된 범위**가 존재한다.
- 수신할 정보를 props에 명시적으로 선언한다.
- 데이터 이름이 camelCase이라면 HTML 속성은 kebab-case를 사용한다.
- 동적 props는 `v-bind`를 사용한다.

------------------------

- 문자열이 아닌 숫자를 전달하고자 한다면, `v-bind`를 사용한다. 
- prop의 초기 값만 사용하고 싶은 경우, 받은 데이터를 Vue 컴포넌트의 로컬 데이터 속성으로 정의하고 이를 활용한다.
- prop의 값은 변경된 값을 전달하고 싶은 경우, 받은 데이터를 Vue 컴포넌트의 **계산된 속성**를 사용한다.

------------------------

- prop에 대한 타입 체크나 기본 값, 검증 처리를 할 수 있다.
- `default`나 `validator` 함수 내에서는 `data`, `computed`, `methods`와 같은 인스턴스 속성을 사용할 수 없다.


### props가 아닌 속성

- 해당 컴포넌트의 정의되지 않은 prop를 말한다.
	- ex. 부트스트랩 컴포넌트

- 대부분의 속성은 컴포넌트에서 제공하는 값으로 대체되지만 **class**, **style** 속성은 병합해준다.

------------------------

- 모든 Vue 인스턴스는 **이벤트 인터페이스**를 구현한다.
	- `$on` : 이벤트 감지
	- `$emit` : 이벤트 트리거
	
	> 브라우저의 EventTarget API와 비슷하게 동작하지만 별개의 API이다.

- 부모 컴포넌트는 자식 컴포넌트의 이벤트를 자식 컴포넌트의 템플릿에 `v-on`을 사용하여 청취할 수 있다. 
- 컴포넌트에서 루트 엘리먼트의네 이티브 이벤트를 수신하고 싶은 때 `.native`를 이용한다.

-----------------------

- v2.3.0 이후에는 속성을 부모에 반영될 수 있도록 `.sync`를 사용한다. (2.0 버전에 삭제 되었다가 다시 추가)
- 사용자 정의 이벤트를 사용하여 커스텀 컴포넌트를 만들어 사용할 수 있다.

-----------------------

- 비 부모-자식간에는 빈 Vue 인스턴스를 이용하여 **중앙 이벤트 버스**로 사용할 수 있다.

```javascript
const bus = new Vue();

// 컴포넌트 A의 메소드
bus.$emit('id-selected', 1);

// 컴포넌트 B의 생명 주기 hook
bus.$on('id-selected', function(id) {
  // ...
});
```


### 슬롯을 사용한 컨텐츠 배포

- **콘텐츠 배포** 프로세스(부모 컨텐츠와 컴포넌트의 자체 템플릿을 섞는 방법)를 활용하기 위해 `<slot>`를 사용한다.
- 하위 컴포넌트 템플릿에 최소한 하나이 `<slot>` 콘텐츠가 포함되어 있지 않으면 부모 콘텐츠가 **삭제**된다.
- `name` 속성을 이용하여 원하는 위치 배포될 수 있다.